---
description: When mapping concepts into code
globs: 
alwaysApply: false
---
brief:
  - "世界はモノの集まりではなく、プロセス（関係）の網である"
  - "第一にプロセスがあり、情報構造はそれに付随したものに過ぎない"
  - "システム開発の流れは、概念知識を 自然言語↔︎図解↔︎コード にマッピング（表現の相互変換）することで進行する"
  - "圏論的プロセス論で世界を捉える"
concept:
  - "ドメインモデルは、term・command・business_rule・event のいずれかとして表現される"
domain_modeling:
  term: 
    - 語彙、ユビキタス言語の写像である"
    eDSL: Tagless-Final で語彙と操作を表現"
    ADT: | 
      - "情報構造を表現（スキーマ・状態）。タグ付きユニオン＋コンパニオンオブジェクトで ADT を表現"
      - "情報の表現とスマートコンストラクタには zod ライブラリを使用"
  command:
    - "コマンドモデル。ユーザの指示であり、語彙から構成されるワークフロー"
    - "コマンドはイベントを返す"
    - "集約を操作というで見た時、集約はコマンドの束である"
    - "集約を状態という側面で見た時、集約はイベントの束である"
    - "コマンドは、eDSL の逐次合成(monadic)と並列合成(applicative)で表現される"
  business_rule:
    - "business_rule は、特定の term や command に紐づく"
    - "１つのビジネスルールは１つの関数で表現されなければならない"
  event:
    - "イベントは独自のディレクトリで切り出されない"
    - "モジュール（term や command）の境界はイベントとして表現される"
    - "起きた事実として表現される"
    - "系の状態が著しく変化したスナップショット履歴がイベントである"
    