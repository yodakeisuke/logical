ユーザーストーリ: |
  私はディスカッションファシリテーターとして、
  既存の論点ノードから 2〜5 件の下位論点を breakdown したい。
  その結果、チームが論点をピラミッド構造で掘り下げ、
  俯瞰しながら議論できるようになる。

受け入れ条件 (BDD): |
```gherkin
Rule: 正常系 ー 2〜5件の子ノードを追加できる
  Example: leafノードに3件追加する
    Given 議論ツリーに id=<parent-id> の leaf ノードが存在する
    And labels.length が3
    When tool「breakdown」を parentId=<parent-id>, labels=["A","B","C"], dimension="切り口", breakdownType="why", decomposeType="AND" で呼び出す
    Then id=<parent-id> の下に3件の子ノードが作成される
    And 各子ノードにユニークな id が付与される
    And ブレイクダウン情報が保存される（type="why", dimension="切り口", decomposeType="AND"）
    And 更新後ツリーのJSONスナップショットを返却する
    And 同じJSONを永続ストレージへ保存する

Rule: 異常系 ー 子ノード数が範囲外
  Example: 6件以上指定したとき
    Given labels.length が6以上
    When tool「breakdown」を呼び出す
    Then エラーコード "TOO_MANY_CHILDREN" と
         メッセージ「ブレイクダウンが多すぎます。最大5個までの子論点にしてください。」を返す

  Example: 1件以下指定したとき
    Given labels.length が1以下
    When tool「breakdown」を呼び出す
    Then エラーコード "NOT_ENOUGH_CHILDREN" と
         メッセージ「ブレイクダウンが足りません。最低2個の子論点が必要です。」を返す

Rule: 異常系 ー 親ノードの状態
  Example: parent-id が存在しない
    Given 不正な parentId
    When tool「breakdown」を呼び出す
    Then エラーコード "NODE_NOT_FOUND" を返す

  Example: parent-id が leaf ではない
    Given parentId が既に子ノードを持つ
    When tool「breakdown」を呼び出す
    Then エラーコード "NOT_A_LEAF" を返す

Rule: 異常系 ー ラベルの妥当性
  Example: ラベルが空文字列または重複を含む
    Given labels = ["A", "", "A"]
    When tool「breakdown」を呼び出す
    Then エラーコード "INVALID_LABELS" を返す
    
Rule: 異常系 ー 兄弟ノード間の一貫性
  Example: 既存の兄弟と異なるブレイクダウンタイプ
    Given 親ノードの兄弟に既にブレイクダウンが存在し、そのタイプが「why」
    When tool「breakdown」をbreakdownType="what"で呼び出す
    Then エラーコード "INCONSISTENT_BREAKDOWN" と
         メッセージ「同階層のブレイクダウンでは、一貫した特性を持つ必要があります。期待されるタイプ: why」を返す

  Example: 既存の兄弟と異なるディメンション
    Given 親ノードの兄弟に既にブレイクダウンが存在し、そのディメンションが「対策手段」
    When tool「breakdown」をdimension="要因"で呼び出す
    Then エラーコード "INCONSISTENT_BREAKDOWN" と
         メッセージ「同階層のブレイクダウンでは、一貫した特性を持つ必要があります。期待される次元: 対策手段」を返す
```

DoR:
  - **tool 名・入力スキーマ**（parentId: string, labels: string[2-5], dimension: string, breakdownType: "why"|"what"|"how", decomposeType: "AND"|"OR"）が確定
  - 既存ノードを leaf と判定するロジックが定義済み
  - JSON スナップショット仕様（ファイル名規約・保存パス）が確定
  - エラーコード表に新規コード (TOO_MANY_CHILDREN, NOT_ENOUGH_CHILDREN, INVALID_LABELS, INCONSISTENT_BREAKDOWN) を追記 🆕

DoD:
  - 論点間の兄弟関係の一貫性チェック実装済み
  - ブレイクダウンタイプごとの視覚的表現（Mermaid）実装済み
  - 分解タイプ（AND/OR）の実装と表示
  - JSON スキーマを用いたレスポンス検証がグリーン
  - コードレビュー 完了
  - README / ドキュメント更新（新パラメータ「decomposeType」の説明追加）